<!DOCTYPE html>
<html lang="en">
  <head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Nitrous | Help</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">
		<link rel="stylesheet" type="text/css" media="screen" href="/css/all-1373380016000.css">
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?skin=sunburst"></script>
   </head>

	<body>
		<div class="mast" id="header">
			<div class="mast-container">
				<ul id="topnav">
					<li class="active"><a href="#">Help Center</a></li>
					<li><a href="https://www.nitrous.io/chat">Live Chat</a></li>
					<li><a href="mailto:help@nitrous.io">Contact Support</a></li>
					<li class="login"><a href="https://www.nitrous.io/users/sign_in">Login</a></li>
				</ul>
				<h1 id="logo">
					<a href="/#">Nitrous.IO</a>
				</h1>
			</div>
		</div>

		<div class="mast" id="search">
			<div class="mast-container">
				<script>
				  (function() {
				    var cx = '009198278762462778395:pwuaikni4bs';
				    var gcse = document.createElement('script');
				    gcse.type = 'text/javascript';
				    gcse.async = true;
				    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
				        '//www.google.com/cse/cse.js?cx=' + cx;
				    var s = document.getElementsByTagName('script')[0];
				    s.parentNode.insertBefore(gcse, s);
				  })();
				</script>
				<gcse:search></gcse:search>
			</div>
		</div>

		<div role="main">
<div id="main-content">
	<article class="hentry">

		<aside role="meta">
			<div role="tags">
				<h4>
					<i role="icon" aria-hidden="true" class="icon-tag"></i>
					Categories:
				</h4>
				<ul>
						<li><a href="/categories/integrations">integrations</a></li>
						<li><a href="/categories/databases">databases</a></li>
				</ul>
			</div>
		</aside>

		<h2 class="entry-title">Setting up MongoDB</h2>
		<div class="date-updated">Last Updated: <time class="updated" datetime="Tue Jul 09 2013 14:26:56 GMT+0000 (UTC)" pubdate>Tue Jul 09 2013 14:26:56 GMT+0000 (UTC)</time></div>

		<div class="entry-content">
			<p>This guide walks through how you can setup a MongoDB database
on your Nitrous.IO box.</p>
<p>In: <a href="https://mongolab.com">MongoLab</a></p>
<p><img src="https://raw.github.com/action-io/action-assets/master/support/screenshots/mongodb/mongolab.png" alt="MongoLab"></p>
<p>Go ahead and sign into MongoLab. Once in the dashboard, you&#39;ll
see a list of any databases you&#39;ve already created. Click the <strong>Create
New</strong> button in the <strong>Databases</strong> section.</p>
<p>You&#39;ll see a bunch of professional plans appear below. You can ignore
these until you&#39;ve deployed your new world-changing application to
production and you have millions of customers and can afford them.</p>
<p>MongoLab knows we need something lightweight to get our feet wet, so for
now we&#39;ll just pick the <strong>Free (0.5GB)</strong> plan.</p>
<p>Pick your Cloud Provider to be <strong>Amazon Web Services</strong> and choose either
the <strong>EU-West-1 (Ireland)</strong> or <strong>US-East-1 (Virginia)</strong> - whichever is
geographically close to the Nitrous.IO box that you created.</p>
<p>Pick a name for your database, say <strong>my-awesome-apps-mongodb</strong> as well as
a username and password (which you will use later to connect to your
MongoDB database).</p>
<p><img src="https://raw.github.com/action-io/action-assets/master/support/screenshots/mongodb/pick-plan.png" alt="Pick Plan Button"></p>
<p>You&#39;ll see your new database at the top of your list of databases (or
just one if you just created an account).</p>
<p><img src="https://raw.github.com/action-io/action-assets/master/support/screenshots/mongodb/create-database.png" alt="Create Database"></p>
<h3>MongoLab Database Connection Settings</h3>
<p>In the <em>MongoLab</em> website, click your database name
(my-awesome-apps-mongodb) to get to the database dashboard. You will see your
database connection URL listed. The username/password combination is the
one you set earlier while creating your database.</p>
<p><img src="https://raw.github.com/action-io/action-assets/master/support/screenshots/mongodb/mongodb-settings.png" alt="MongoLab Settings"></p>
<p>As seen in the screenshot, <strong>ds043447.mongolab.com</strong> is the host, <strong>43447</strong>
is the port, <strong>my-awesome-apps-mongodb</strong> is the database name, <strong>dbuser</strong>, <strong>dbpassword</strong>
is the username/password combination that you set earlier.</p>
<p>Grab each of the values and add them as environment variables in your
<strong>~/.bash_profile</strong> file on your Nitrous.IO box. It is good practice to
namespace your environment variables variables with the environment that you want to use your database in
(development or test), like so:</p>
<pre><code>export MONGODB_DEVELOPMENT_HOST=ds043447.mongolab.com
export MONGODB_DEVELOPMENT_PORT=43447
export MONGODB_DEVELOPMENT_DB=my-awesome-apps-mongodb
export MONGODB_DEVELOPMENT_USERNAME=dbuser
export MONGODB_DEVELOPMENT_PASSWORD=dbpassword
export MONGODB_DEVELOPMENT_URI=mongodb://${MONGODB_DEVELOPMENT_USERNAME}:${MONGODB_DEVELOPMENT_PASSWORD}@${MONGODB_DEVELOPMENT_HOST}:${MONGODB_DEVELOPMENT_PORT}/${MONGODB_DEVELOPMENT_DB}</code></pre>
<p>(Note: Some libraries for e.g. Ruby&#39;s Mongoid gem prefers to use the URI
format, so &quot;MONGODB_DEVELOPMENT_URI&quot; is also included as part of your
environment variables).</p>
<p>This will ensure that every time you log into your Nitrous.IO box, your
database credentials will be available as environment variables to use
in any of your apps.</p>
<p>If you want the environment variables to be loaded immediately, run</p>
<pre><code>source ~/.bash_profile</code></pre>
<p>You can verify that your MongoDB credentials are loaded correctly by
running</p>
<pre><code>echo $MONGODB_DEVELOPMENT_HOST</code></pre>
<p>This should return <strong>ds043447.mongolab.com</strong></p>
<h3>Connecting with the Official MongoDB Client</h3>
<p>All Nitrous.IO boxes come bundled with the official &quot;mongo&quot; client which
can be used to connect to the database. You can connect to the MongoLab
MongoDB database that you just created, by using the command</p>
<pre><code>mongo --shell --host $MONGODB_DEVELOPMENT_HOST --port $MONGODB_DEVELOPMENT_PORT -u $MONGODB_DEVELOPMENT_USERNAME -p $MONGODB_DEVELOPMENT_PASSWORD $MONGODB_DEVELOPMENT_DB</code></pre>
<p><img src="https://raw.github.com/action-io/action-assets/master/support/screenshots/mongodb/shell.png" alt="MongoDB Shell"></p>
<h3>Rails/Ruby</h3>
<p>You can now access your database in your Rails application for e.g. by
using</p>
<pre class="prettyprint lang-ruby">
ENV['MONGODB_DEVELOPMENT_URI']
</pre>

<p>We recommend using the mongoid gem which you can install using:</p>
<pre><code>gem install mongoid</code></pre>
<p>If you are running a Rails app, remember to include mongoid as part of
your Gemfile and run</p>
<pre><code>rails generate mongoid:config</code></pre>
<p><img src="https://raw.github.com/action-io/action-assets/master/support/screenshots/mongodb/mongoid.png" alt="rails generate mongoid:config"></p>
<p>Then in your &quot;development&quot; environment, under the default session, set
the uri to be &quot;ENV[&#39;MONGODB_DEVELOPMENT_URI&#39;]&quot;</p>
<p><img src="https://raw.github.com/action-io/action-assets/master/support/screenshots/mongodb/database-ruby.png" alt="Rails MongoDB Settings"></p>
<h3>Node.JS</h3>
<p>In Node.JS, you can access each of the environment variables by using</p>
<pre class="prettyprint lang-javascript">
process.env.MONGODB_DEVELOPMENT_HOST, process.env.MONGODB_DEVELOPMENT_PORT,
process.env.MONGODB_DEVELOPMENT_USER, process.env.MONGODB_DEVELOPMENT_PASSWORD,
process.env.MONGODB_DEVELOPMENT_DB, process.env.MONGODB_DEVELOPMENT_URI
</pre>

<p>(Please note, you&#39;ll probably need to install the
<a href="https://npmjs.org/package/mongoose">mongoose</a> NPM
before you use Postgres in a Node.JS app, using the following command:</p>
<pre><code>npm install mongoose</code></pre>
<p>Here&#39;s an example of how you can connect to your MongoLab database using
mongoose</p>
<p><img src="https://raw.github.com/action-io/action-assets/master/support/screenshots/mongodb/database-nodejs.png" alt="Node.JS MongoDB Settings"></p>
<h3>Django/Python</h3>
<p>In Python, you can access each of the environment variables by using</p>
<pre class="prettyprint lang-python">
os.environ['MONGODB_DEVELOPMENT_HOST'], os.environ['MONGODB_DEVELOPMENT_PORT'],
os.environ['MONGODB_DEVELOPMENT_USER'], os.environ['MONGODB_DEVELOPMENT_PASSWORD'],
os.environ['MONGODB_DEVELOPMENT_DB'], os.environ['MONGODB_DEVELOPMENT_URI']
</pre>

<p>The instructions in the official MongoDB documentatin for Python is an
excellent guide, but you can replace the settings in settings.py with
the MongoLab variables, like so:</p>
<p><img src="https://raw.github.com/action-io/action-assets/master/support/screenshots/mongodb/database-python.png" alt="Python MongoDB Settings"></p>

		</div>

		<div class="ftags clearfix">
			<ul>
				<li class="label">More articles in:</li>
					<li><a href="/categories/integrations">integrations</a></li>
					<li><a href="/categories/databases">databases</a></li>
			</ul>
		</div>
	</article>
</div>




    </div>

      <div class="mast" class="footer clearfix">
        <div class="mast-container">
          <footer>
            <ul class="social">
              <li class="twitter"><a href="https://www.twitter.com/nitrousio">twitter</a></li>
              <li class="facebook"><a href="#">facebook</a></li>
            </ul>

            <ul>
              <li><a href="http://www.nitrous.io">sign up</a></li>
              <li><a href="http://www.nitrous.io/users/sign_in">sign in</a></li>
              <li><a href="http://help.nitrous.io/admin-privacy">privacy</a></li>
              <li><a href="http://help.nitrous.io/admin-security">security</a></li>
            </ul>
          </footer>
        </div>
      </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
  </body>

</html>
